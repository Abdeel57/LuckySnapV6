import{j as e,Y as s,W as t,x as r,X as a,N as l}from"./ui-CC9fDAxl.js";import{r as o}from"./router-DKHyH_C6.js";import{u as n}from"./index.esm-kOr9XXcU.js";const c=({order:c,onSave:i,onCancel:d})=>{var m,x,u;const[b,h]=o.useState(!1),{register:j,handleSubmit:g,formState:{errors:f}}=n({defaultValues:{customerName:(null==(m=c.customer)?void 0:m.name)||"",customerPhone:(null==(x=c.customer)?void 0:x.phone)||"",customerDistrict:(null==(u=c.customer)?void 0:u.district)||"",notes:c.notes||""}});return e.jsxs("form",{onSubmit:g(async e=>{var s;h(!0);try{const t={...c,customer:{...c.customer,name:e.customerName,phone:e.customerPhone,district:e.customerDistrict,email:(null==(s=c.customer)?void 0:s.email)||""},notes:e.notes,updatedAt:new Date};i(t)}catch(t){console.error("Error updating order:",t)}finally{h(!1)}}),className:"space-y-6",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[e.jsx(s,{className:"w-5 h-5 mr-2 text-blue-600"}),"Información del Cliente"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Nombre Completo"}),e.jsx("input",{...j("customerName",{required:"El nombre es requerido"}),className:"w-full px-3 py-2 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500"}),f.customerName&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:f.customerName.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Teléfono"}),e.jsx("input",{...j("customerPhone",{required:"El teléfono es requerido",pattern:{value:/^\d{8}$/,message:"Debe tener 8 dígitos"}}),className:"w-full px-3 py-2 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500"}),f.customerPhone&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:f.customerPhone.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Distrito"}),e.jsx("input",{...j("customerDistrict",{required:"El distrito es requerido"}),className:"w-full px-3 py-2 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500"}),f.customerDistrict&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:f.customerDistrict.message})]})]})]}),e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[e.jsx(t,{className:"w-5 h-5 mr-2 text-green-600"}),"Información de la Orden"]}),e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-xl p-4 mb-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("svg",{className:"h-5 w-5 text-blue-400",viewBox:"0 0 20 20",fill:"currentColor",children:e.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})})}),e.jsxs("div",{className:"ml-3",children:[e.jsx("h3",{className:"text-sm font-medium text-blue-800",children:"Información Importante"}),e.jsxs("div",{className:"mt-2 text-sm text-blue-700",children:[e.jsxs("p",{children:["• El ",e.jsx("strong",{children:"estado"}),' se controla con los botones "Marcar Pagado" y "Liberar"']}),e.jsxs("p",{children:["• El ",e.jsx("strong",{children:"total"})," no se puede modificar una vez creada la orden"]}),e.jsx("p",{children:"• Solo puedes editar los datos del cliente y las notas"})]})]})]})}),e.jsxs("div",{className:"mt-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Notas"}),e.jsx("textarea",{...j("notes"),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Notas adicionales sobre la orden..."})]})]}),e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[e.jsx(r,{className:"w-5 h-5 mr-2 text-gray-600"}),"Información de Solo Lectura"]}),e.jsxs("div",{className:"bg-gray-50 rounded-xl p-4 space-y-3",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Folio:"}),e.jsx("span",{className:"font-medium text-gray-900",children:c.folio})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Estado:"}),e.jsx("span",{className:"px-2 py-1 rounded-full text-xs font-medium "+("PENDING"===c.status?"bg-yellow-100 text-yellow-800":"PAID"===c.status||"COMPLETED"===c.status?"bg-green-100 text-green-800":"RELEASED"===c.status?"bg-blue-100 text-blue-800":"bg-gray-100 text-gray-800"),children:c.status})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Total:"}),e.jsxs("span",{className:"font-bold text-green-600",children:["$",(c.totalAmount||c.total||0).toLocaleString()]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Boletos:"}),e.jsx("span",{className:"font-medium text-gray-900",children:c.tickets.join(", ")})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Fecha de Creación:"}),e.jsx("span",{className:"font-medium text-gray-900",children:new Date(c.createdAt).toLocaleString("es-ES")})]}),c.expiresAt&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Fecha de Expiración:"}),e.jsx("span",{className:"font-medium text-gray-900",children:new Date(c.expiresAt).toLocaleString("es-ES")})]})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-6 border-t border-gray-200",children:[e.jsxs("button",{type:"button",onClick:d,className:"flex items-center space-x-2 px-6 py-2 border border-gray-300 text-gray-700 rounded-xl hover:bg-gray-50 transition-colors",children:[e.jsx(a,{className:"w-4 h-4"}),e.jsx("span",{children:"Cancelar"})]}),e.jsxs("button",{type:"submit",disabled:b,className:"flex items-center space-x-2 px-6 py-2 bg-blue-600 text-white rounded-xl hover:bg-blue-700 transition-colors disabled:opacity-50",children:[e.jsx(l,{className:"w-4 h-4"}),e.jsx("span",{children:b?"Guardando...":"Guardar Cambios"})]})]})]})};export{c as E};
