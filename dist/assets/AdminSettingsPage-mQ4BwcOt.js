import{j as e,X as a,O as s,R as r,a3 as l,a4 as o,a5 as n,w as c,P as i,a6 as t,N as d,m,t as x,A as p}from"./ui-CC9fDAxl.js";import{r as u}from"./router-DKHyH_C6.js";import{u as h,a as g,C as j}from"./index.esm-kOr9XXcU.js";import{F as b,g as y,S as v,G as N}from"./index-DmsZdVbW.js";import"./vendor-By4jc1MA.js";const f=({value:r,onChange:l,placeholder:o="Seleccionar imagen",maxWidth:n=800,maxHeight:c=600,quality:i=.8,accept:t="image/*"})=>{const d=u.useRef(null),[m,x]=u.useState(!1),[p,h]=u.useState(r||null);return e.jsxs("div",{className:"space-y-3",children:[e.jsx("input",{ref:d,type:"file",accept:t,onChange:async e=>{var a;const s=null==(a=e.target.files)?void 0:a[0];if(s)if(s.type.startsWith("image/"))if(s.size>10485760)alert("La imagen es demasiado grande. Máximo 10MB");else{x(!0);try{console.log("📁 Procesando imagen:",{nombre:s.name,"tamaño":Math.round(s.size/1024)+"KB",tipo:s.type});const e=await(e=>new Promise((a,s)=>{const r=document.createElement("canvas"),l=r.getContext("2d"),o=new Image;o.onload=()=>{let{width:e,height:s}=o;if(e>n||s>c){const a=Math.min(n/e,c/s);e*=a,s*=a}r.width=e,r.height=s,null==l||l.drawImage(o,0,0,e,s);const t=r.toDataURL("image/jpeg",i);a(t)},o.onerror=()=>s(new Error("Error al cargar la imagen")),o.src=URL.createObjectURL(e)}))(s);console.log("✅ Imagen optimizada:",{"tamañoOriginal":Math.round(s.size/1024)+"KB","tamañoOptimizado":Math.round(.75*e.length/1024)+"KB",dimensiones:`${n}x${c}`}),h(e),l(e)}catch(r){console.error("❌ Error procesando imagen:",r),alert("Error al procesar la imagen")}finally{x(!1)}}else alert("Por favor selecciona un archivo de imagen válido")},className:"hidden",disabled:m}),e.jsx("div",{onClick:()=>{var e;null==(e=d.current)||e.click()},className:`\n          relative border-2 border-dashed rounded-lg p-6 text-center cursor-pointer transition-all\n          ${p?"border-green-300 bg-green-50":"border-gray-300 hover:border-blue-400 hover:bg-blue-50"}\n          ${m?"opacity-50 cursor-not-allowed":""}\n        `,children:m?e.jsxs("div",{className:"flex flex-col items-center space-y-2",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Procesando imagen..."})]}):p?e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:p,alt:"Preview",className:"max-w-full max-h-48 mx-auto rounded-lg shadow-md"}),e.jsx("button",{onClick:e=>{e.preventDefault(),e.stopPropagation(),h(null),l(""),d.current&&(d.current.value="")},className:"absolute -top-2 -right-2 bg-red-500 text-white rounded-full p-1 hover:bg-red-600 transition-colors",children:e.jsx(a,{size:16})})]}):e.jsxs("div",{className:"flex flex-col items-center space-y-2",children:[e.jsx(s,{size:32,className:"text-gray-400"}),e.jsx("p",{className:"text-sm text-gray-600",children:o}),e.jsx("p",{className:"text-xs text-gray-500",children:"PNG, JPG, GIF hasta 10MB"})]})}),p&&e.jsxs("div",{className:"text-xs text-gray-500 space-y-1",children:[e.jsx("p",{children:"✅ Imagen optimizada y redimensionada"}),e.jsxs("p",{children:["📏 Dimensiones máximas: ",n,"x",c,"px"]}),e.jsxs("p",{children:["🎯 Calidad: ",Math.round(100*i),"%"]})]})]})},w=({title:a,icon:s,children:r,description:l})=>e.jsxs(m.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white rounded-2xl shadow-lg border border-gray-200 p-4 md:p-6 mb-6",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-4 pb-4 border-b border-gray-200",children:[e.jsx("div",{className:"p-2 bg-blue-100 rounded-xl",children:e.jsx(s,{className:"w-5 h-5 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-bold text-gray-900",children:a}),l&&e.jsx("p",{className:"text-sm text-gray-600",children:l})]})]}),r]}),C="w-full mt-1 p-3 border border-gray-300 rounded-xl bg-white text-gray-800 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200",k="block text-sm font-semibold text-gray-700 mb-2",P=({primaryColor:a,accentColor:s,backgroundColor:r,secondaryBackgroundColor:l})=>{const[o,n]=u.useState(!1);return e.jsxs("div",{className:"bg-white rounded-2xl shadow-lg border border-gray-200 p-6 mb-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"p-2 bg-purple-100 rounded-xl",children:e.jsx(x,{className:"w-5 h-5 text-purple-600"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold text-gray-900",children:"Vista Previa de Colores"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Ve cómo se verán los cambios"})]})]}),e.jsxs("button",{onClick:()=>n(!o),className:"px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors",children:[o?"Ocultar":"Mostrar"," Preview"]})]}),e.jsx(p,{children:o&&e.jsx(m.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"overflow-hidden",children:e.jsxs("div",{className:"border rounded-xl p-4 bg-gray-50",children:[e.jsx("h4",{className:"text-sm font-semibold text-gray-700 mb-3",children:"Paleta de Colores Actual"}),e.jsxs("div",{className:"grid grid-cols-4 gap-3",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-full h-16 rounded-lg border shadow-sm",style:{backgroundColor:a}}),e.jsx("p",{className:"text-xs text-gray-600 mt-1",children:"Primario"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-full h-16 rounded-lg border shadow-sm",style:{backgroundColor:s}}),e.jsx("p",{className:"text-xs text-gray-600 mt-1",children:"Acento"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-full h-16 rounded-lg border shadow-sm",style:{backgroundColor:r}}),e.jsx("p",{className:"text-xs text-gray-600 mt-1",children:"Fondo"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-full h-16 rounded-lg border shadow-sm",style:{backgroundColor:l}}),e.jsx("p",{className:"text-xs text-gray-600 mt-1",children:"Secundario"})]})]})]})})})]})},S=({onPresetSelect:a})=>e.jsxs("div",{className:"bg-white rounded-2xl shadow-lg border border-gray-200 p-6 mb-6",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-6",children:[e.jsx("div",{className:"p-2 bg-indigo-100 rounded-xl",children:e.jsx(l,{className:"w-5 h-5 text-indigo-600"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold text-gray-900",children:"Presets de Colores"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Selecciona una paleta predefinida"})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[{name:"Azul Profesional",colors:{primary:"#3B82F6",accent:"#10B981",background:"#111827",secondaryBackground:"#1F2937"}},{name:"Púrpura Creativo",colors:{primary:"#8B5CF6",accent:"#F59E0B",background:"#111827",secondaryBackground:"#1F2937"}},{name:"Verde Naturaleza",colors:{primary:"#10B981",accent:"#F59E0B",background:"#111827",secondaryBackground:"#1F2937"}}].map((s,r)=>e.jsxs(m.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1*r},onClick:()=>a(s),className:"p-4 rounded-xl border-2 border-gray-200 cursor-pointer transition-all duration-200 hover:border-blue-500 hover:shadow-md",children:[e.jsx("h4",{className:"font-semibold text-gray-900 mb-3",children:s.name}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("div",{className:"w-8 h-8 rounded-lg border shadow-sm",style:{backgroundColor:s.colors.primary},title:"Color primario"}),e.jsx("div",{className:"w-8 h-8 rounded-lg border shadow-sm",style:{backgroundColor:s.colors.accent},title:"Color de acento"}),e.jsx("div",{className:"w-8 h-8 rounded-lg border shadow-sm",style:{backgroundColor:s.colors.background},title:"Color de fondo"}),e.jsx("div",{className:"w-8 h-8 rounded-lg border shadow-sm",style:{backgroundColor:s.colors.secondaryBackground},title:"Color secundario"})]})]},s.name))})]}),B=()=>{const{register:a,control:s,handleSubmit:m,reset:x,formState:{isSubmitting:p,isDirty:B}}=h(),[A,F]=u.useState(!0),[z,E]=u.useState(!1),{updateAppearance:L}=b(),[I,U]=u.useState({primary:"#0ea5e9",accent:"#ec4899",background:"#111827",secondaryBackground:"#1f2937"}),{fields:q,append:$,remove:R}=g({control:s,name:"paymentAccounts"}),{fields:M,append:G,remove:W}=g({control:s,name:"faqs"});u.useEffect(()=>{y().then(e=>{var a;x(e),(null==(a=e.appearance)?void 0:a.colors)&&U({primary:e.appearance.colors.action||"#0ea5e9",accent:e.appearance.colors.accent||"#ec4899",background:e.appearance.colors.backgroundPrimary||"#111827",secondaryBackground:e.appearance.colors.backgroundSecondary||"#1f2937"}),F(!1)}).catch(e=>{console.error("Error loading settings:",e),F(!1)})},[x]);const O=e=>{U(e),L({siteName:"Lucky Snap",logoAnimation:"rotate",colors:{backgroundPrimary:e.background,backgroundSecondary:e.secondaryBackground,accent:e.accent,action:e.primary}})};return A?e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx(v,{size:"lg"}),e.jsx("p",{className:"mt-4 text-gray-600",children:"Cargando configuración..."})]})}):e.jsx("div",{className:"min-h-screen bg-gray-50",children:e.jsxs("div",{className:"max-w-6xl mx-auto px-4 py-8",children:[e.jsx("div",{className:"mb-8",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Configuración"}),e.jsx("p",{className:"text-gray-600 mt-2",children:"Personaliza la apariencia y configuración de tu plataforma"})]}),e.jsx("div",{className:"flex space-x-3",children:e.jsxs("button",{onClick:()=>window.location.reload(),className:"flex items-center space-x-2 px-4 py-2 bg-gray-100 text-gray-700 rounded-xl hover:bg-gray-200 transition-colors",children:[e.jsx(r,{className:"w-4 h-4"}),e.jsx("span",{children:"Actualizar"})]})})]})}),e.jsxs("form",{onSubmit:m(async e=>{var a,s,r,l,o,n,c,i,t,d,m,p,u,h,g;E(!0);try{console.log("🔧 Saving settings:",e);const j={...e,appearance:{...e.appearance,colors:{backgroundPrimary:(null==(s=null==(a=e.appearance)?void 0:a.colors)?void 0:s.backgroundPrimary)||"#111827",backgroundSecondary:(null==(l=null==(r=e.appearance)?void 0:r.colors)?void 0:l.backgroundSecondary)||"#1f2937",accent:(null==(n=null==(o=e.appearance)?void 0:o.colors)?void 0:n.accent)||"#ec4899",action:(null==(i=null==(c=e.appearance)?void 0:c.colors)?void 0:i.action)||"#0ea5e9"}},contactInfo:{whatsapp:(null==(t=e.contactInfo)?void 0:t.whatsapp)||"",email:(null==(d=e.contactInfo)?void 0:d.email)||""},socialLinks:{facebookUrl:(null==(m=e.socialLinks)?void 0:m.facebookUrl)||"",instagramUrl:(null==(p=e.socialLinks)?void 0:p.instagramUrl)||"",twitterUrl:(null==(u=e.socialLinks)?void 0:u.twitterUrl)||""},paymentAccounts:e.paymentAccounts||[],faqs:e.faqs||[]},b=await N(j);console.log("✅ Settings saved successfully:",b),x(b),b.appearance&&(console.log("🎨 Updating appearance in real-time..."),L(b.appearance)),alert(`✅ Configuración guardada con éxito!\n\nCambios aplicados:\n- Apariencia: ${(null==(h=b.appearance)?void 0:h.siteName)||"N/A"}\n- Contacto: ${(null==(g=b.contactInfo)?void 0:g.whatsapp)?"WhatsApp configurado":"Sin WhatsApp"}\n- Redes: ${Object.values(b.socialLinks||{}).filter(Boolean).length} redes configuradas`)}catch(j){console.error("❌ Error saving settings:",j),alert("❌ Error al guardar la configuración. Revisa la consola para más detalles.")}finally{E(!1)}}),className:"space-y-6",children:[e.jsx(S,{onPresetSelect:e=>{U(e.colors),x({...x,appearance:{...x.appearance,colors:{backgroundPrimary:e.colors.background,backgroundSecondary:e.colors.secondaryBackground,accent:e.colors.accent,action:e.colors.primary}}}),O(e.colors)}}),e.jsx(P,{primaryColor:I.primary,accentColor:I.accent,backgroundColor:I.background,secondaryBackgroundColor:I.secondaryBackground}),e.jsx(w,{title:"Apariencia General",icon:l,description:"Configura la apariencia visual de tu plataforma",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:k,children:"Nombre del Sitio"}),e.jsx("input",{...a("appearance.siteName",{required:!0}),className:C})]}),e.jsxs("div",{children:[e.jsx("label",{className:k,children:"Logo del Sitio"}),e.jsx(j,{name:"appearance.logo",control:s,render:({field:a})=>e.jsx(f,{value:a.value,onChange:a.onChange,placeholder:"Seleccionar logo del sitio",maxWidth:200,maxHeight:200,quality:.9})})]}),e.jsxs("div",{children:[e.jsx("label",{className:k,children:"Favicon"}),e.jsx(j,{name:"appearance.favicon",control:s,render:({field:a})=>e.jsx(f,{value:a.value,onChange:a.onChange,placeholder:"Seleccionar favicon",maxWidth:32,maxHeight:32,quality:.8})})]}),e.jsxs("div",{children:[e.jsx("label",{className:k,children:"Animación del Logo"}),e.jsxs("select",{...a("appearance.logoAnimation"),className:C,children:[e.jsx("option",{value:"rotate",children:"Rotación"}),e.jsx("option",{value:"pulse",children:"Pulso"}),e.jsx("option",{value:"bounce",children:"Rebote"}),e.jsx("option",{value:"none",children:"Ninguna"})]})]})]})}),e.jsx(w,{title:"Colores Personalizados",icon:l,description:"Personaliza los colores de tu plataforma",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:k,children:"Color Primario"}),e.jsx("input",{type:"color",...a("appearance.colors.action"),className:"w-full h-12 border border-gray-300 rounded-xl cursor-pointer",onChange:e=>{const a={...I,primary:e.target.value};U(a),O(a)}}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Color principal para botones y elementos destacados"})]}),e.jsxs("div",{children:[e.jsx("label",{className:k,children:"Color de Acento"}),e.jsx("input",{type:"color",...a("appearance.colors.accent"),className:"w-full h-12 border border-gray-300 rounded-xl cursor-pointer",onChange:e=>{const a={...I,accent:e.target.value};U(a),O(a)}}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Color secundario para elementos especiales"})]}),e.jsxs("div",{children:[e.jsx("label",{className:k,children:"Color de Fondo Principal"}),e.jsx("input",{type:"color",...a("appearance.colors.backgroundPrimary"),className:"w-full h-12 border border-gray-300 rounded-xl cursor-pointer",onChange:e=>{const a={...I,background:e.target.value};U(a),O(a)}}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Color de fondo principal de la página"})]}),e.jsxs("div",{children:[e.jsx("label",{className:k,children:"Color de Fondo Secundario"}),e.jsx("input",{type:"color",...a("appearance.colors.backgroundSecondary"),className:"w-full h-12 border border-gray-300 rounded-xl cursor-pointer",onChange:e=>{const a={...I,secondaryBackground:e.target.value};U(a),O(a)}}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Color de fondo para secciones y cards"})]})]})}),e.jsx(w,{title:"Información de Contacto",icon:o,description:"Configura la información de contacto visible en tu sitio",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:k,children:"WhatsApp"}),e.jsx("input",{...a("contactInfo.whatsapp"),className:C,placeholder:"+50499999999"})]}),e.jsxs("div",{children:[e.jsx("label",{className:k,children:"Email"}),e.jsx("input",{...a("contactInfo.email"),className:C,placeholder:"contacto@ejemplo.com"})]})]})}),e.jsx(w,{title:"Redes Sociales",icon:o,description:"Configura los enlaces a tus redes sociales",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:k,children:"Facebook"}),e.jsx("input",{...a("socialLinks.facebookUrl"),className:C,placeholder:"https://facebook.com/tu-pagina"})]}),e.jsxs("div",{children:[e.jsx("label",{className:k,children:"Instagram"}),e.jsx("input",{...a("socialLinks.instagramUrl"),className:C,placeholder:"https://instagram.com/tu-perfil"})]}),e.jsxs("div",{children:[e.jsx("label",{className:k,children:"Twitter"}),e.jsx("input",{...a("socialLinks.twitterUrl"),className:C,placeholder:"https://twitter.com/tu-perfil"})]})]})}),e.jsx(w,{title:"Cuentas de Pago",icon:n,description:"Configura las cuentas donde los usuarios pueden realizar pagos",children:e.jsxs("div",{className:"space-y-4",children:[q.map((s,r)=>e.jsxs("div",{className:"p-4 border border-gray-200 rounded-xl",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:k,children:"Nombre de la Cuenta"}),e.jsx("input",{...a(`paymentAccounts.${r}.name`),className:C,placeholder:"Banco Atlántida"})]}),e.jsxs("div",{children:[e.jsx("label",{className:k,children:"Número de Cuenta"}),e.jsx("input",{...a(`paymentAccounts.${r}.number`),className:C,placeholder:"1234567890"})]}),e.jsxs("div",{children:[e.jsx("label",{className:k,children:"Tipo"}),e.jsxs("select",{...a(`paymentAccounts.${r}.type`),className:C,children:[e.jsx("option",{value:"bank",children:"Banco"}),e.jsx("option",{value:"mobile",children:"Móvil"}),e.jsx("option",{value:"crypto",children:"Criptomoneda"})]})]})]}),e.jsxs("button",{type:"button",onClick:()=>R(r),className:"mt-3 flex items-center space-x-2 text-red-600 hover:text-red-700",children:[e.jsx(c,{className:"w-4 h-4"}),e.jsx("span",{children:"Eliminar"})]})]},s.id)),e.jsxs("button",{type:"button",onClick:()=>$({name:"",number:"",type:"bank"}),className:"flex items-center space-x-2 text-blue-600 hover:text-blue-700",children:[e.jsx(i,{className:"w-4 h-4"}),e.jsx("span",{children:"Agregar Cuenta de Pago"})]})]})}),e.jsx(w,{title:"Preguntas Frecuentes",icon:t,description:"Configura las preguntas frecuentes que aparecerán en tu sitio",children:e.jsxs("div",{className:"space-y-4",children:[M.map((s,r)=>e.jsxs("div",{className:"p-4 border border-gray-200 rounded-xl",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:k,children:"Pregunta"}),e.jsx("input",{...a(`faqs.${r}.question`),className:C,placeholder:"¿Cómo funciona el sistema?"})]}),e.jsxs("div",{children:[e.jsx("label",{className:k,children:"Respuesta"}),e.jsx("textarea",{...a(`faqs.${r}.answer`),className:C,rows:3,placeholder:"El sistema funciona de la siguiente manera..."})]})]}),e.jsxs("button",{type:"button",onClick:()=>W(r),className:"mt-3 flex items-center space-x-2 text-red-600 hover:text-red-700",children:[e.jsx(c,{className:"w-4 h-4"}),e.jsx("span",{children:"Eliminar"})]})]},s.id)),e.jsxs("button",{type:"button",onClick:()=>G({question:"",answer:""}),className:"flex items-center space-x-2 text-blue-600 hover:text-blue-700",children:[e.jsx(i,{className:"w-4 h-4"}),e.jsx("span",{children:"Agregar Pregunta Frecuente"})]})]})}),e.jsxs("div",{className:"flex justify-end space-x-4 pt-6",children:[e.jsx("button",{type:"button",onClick:()=>window.location.reload(),className:"px-6 py-3 bg-gray-100 text-gray-700 rounded-xl hover:bg-gray-200 transition-colors",children:"Cancelar"}),e.jsx("button",{type:"submit",disabled:p||z,className:"px-6 py-3 bg-blue-500 text-white rounded-xl hover:bg-blue-600 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center space-x-2",children:z?e.jsxs(e.Fragment,{children:[e.jsx(v,{size:"sm"}),e.jsx("span",{children:"Guardando..."})]}):e.jsxs(e.Fragment,{children:[e.jsx(d,{className:"w-4 h-4"}),e.jsx("span",{children:"Guardar Configuración"})]})})]})]})]})})};export{B as default};
