import{j as e,k as t,l as n,A as i,m as a,X as s}from"./ui-CC9fDAxl.js";import{r as o}from"./router-DKHyH_C6.js";const r=({images:r,title:l,className:c=""})=>{const[d,h]=o.useState(0),[u,m]=o.useState(!1);if(!r||0===r.length)return e.jsx("div",{className:`bg-gray-200 rounded-lg flex items-center justify-center ${c}`,children:e.jsx("span",{className:"text-gray-500",children:"Sin imÃ¡genes"})});const p=()=>{h(e=>(e+1)%r.length)},g=()=>{h(e=>(e-1+r.length)%r.length)},b=()=>{m(!1)};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:`relative ${c}`,children:[e.jsx("div",{className:"relative group",children:e.jsxs("div",{className:"relative w-full aspect-square overflow-hidden rounded-2xl bg-gradient-to-br from-slate-800 to-slate-900 shadow-2xl border-2 border-slate-700/50",children:[e.jsx("img",{src:r[d]||"https://images.unsplash.com/photo-1592750475338-74b7b21085ab?w=400&h=300&fit=crop",alt:`${l} - Imagen ${d+1}`,className:"w-full h-full object-cover cursor-pointer transition-transform duration-300 hover:scale-105",onClick:()=>(h(d),void m(!0)),onError:e=>{e.target.src="https://images.unsplash.com/photo-1592750475338-74b7b21085ab?w=400&h=300&fit=crop"}}),r.length>1&&e.jsx("div",{className:"absolute top-4 right-4 bg-black/50 backdrop-blur-sm rounded-full px-3 py-1",children:e.jsxs("span",{className:"text-white text-xs font-medium",children:[r.length," fotos"]})})]})}),r.length>1&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:g,className:"absolute left-2 top-1/2 transform -translate-y-1/2 bg-black/50 backdrop-blur-sm text-white p-2 rounded-full hover:bg-black/70 transition-all z-10","aria-label":"Imagen anterior",children:e.jsx(t,{className:"w-5 h-5"})}),e.jsx("button",{onClick:p,className:"absolute right-2 top-1/2 transform -translate-y-1/2 bg-black/50 backdrop-blur-sm text-white p-2 rounded-full hover:bg-black/70 transition-all z-10","aria-label":"Siguiente imagen",children:e.jsx(n,{className:"w-5 h-5"})})]}),r.length>1&&e.jsx("div",{className:"flex space-x-3 mt-4 overflow-x-auto pb-2 scrollbar-hide",children:r.map((t,n)=>e.jsx("button",{onClick:()=>h(n),className:"flex-shrink-0 w-20 h-20 rounded-xl overflow-hidden border-2 transition-all duration-300 "+(n===d?"border-accent shadow-lg shadow-accent/20":"border-slate-600 hover:border-slate-400"),children:e.jsx("img",{src:t||"https://images.unsplash.com/photo-1592750475338-74b7b21085ab?w=400&h=300&fit=crop",alt:`${l} - Miniatura ${n+1}`,className:"w-full h-full object-cover",onError:e=>{e.target.src="https://images.unsplash.com/photo-1592750475338-74b7b21085ab?w=400&h=300&fit=crop"}})},n))})]}),e.jsx(i,{children:u&&e.jsx(a.div,{className:"fixed inset-0 bg-black bg-opacity-90 z-50 flex items-center justify-center p-4",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:b,children:e.jsxs("div",{className:"relative max-w-4xl max-h-full",children:[e.jsx("button",{onClick:b,className:"absolute top-4 right-4 z-10 bg-black bg-opacity-50 text-white p-2 rounded-full hover:bg-opacity-70 transition-all","aria-label":"Cerrar",children:e.jsx(s,{className:"w-6 h-6"})}),e.jsx(a.img,{src:r[d]||"https://images.unsplash.com/photo-1592750475338-74b7b21085ab?w=400&h=300&fit=crop",alt:`${l} - Imagen ${d+1}`,className:"max-w-full max-h-full object-contain rounded-lg",initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.8,opacity:0},transition:{duration:.3},onError:e=>{e.target.src="https://images.unsplash.com/photo-1592750475338-74b7b21085ab?w=400&h=300&fit=crop"}},d),r.length>1&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:e=>{e.stopPropagation(),g()},className:"absolute left-4 top-1/2 transform -translate-y-1/2 bg-black bg-opacity-50 text-white p-3 rounded-full hover:bg-opacity-70 transition-all","aria-label":"Imagen anterior",children:e.jsx(t,{className:"w-6 h-6"})}),e.jsx("button",{onClick:e=>{e.stopPropagation(),p()},className:"absolute right-4 top-1/2 transform -translate-y-1/2 bg-black bg-opacity-50 text-white p-3 rounded-full hover:bg-opacity-70 transition-all","aria-label":"Siguiente imagen",children:e.jsx(n,{className:"w-6 h-6"})})]}),r.length>1&&e.jsxs("div",{className:"absolute bottom-4 left-1/2 transform -translate-x-1/2 bg-black bg-opacity-50 text-white px-3 py-1 rounded-full text-sm",children:[d+1," de ",r.length]})]})})})]})},l={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1};const c=new class{constructor(){this.pixelId=null,this.isInitialized=!1,this.eventQueue=[],this.loadPixelConfig()}async loadPixelConfig(){try{const e=(null==l?void 0:l.VITE_API_URL)||"http://localhost:3000/api",t=await fetch(`${e}/admin/meta/pixel-config`),n=await t.json();this.pixelId=n.pixelId,this.initializePixel()}catch(e){console.error("Error loading pixel config:",e),this.pixelId="1234567890123456",this.initializePixel()}}initializePixel(){if(!this.pixelId||this.isInitialized)return;const e=document.createElement("script");e.innerHTML=`\n      !function(f,b,e,v,n,t,s)\n      {if(f.fbq)return;n=f.fbq=function(){n.callMethod?\n      n.callMethod.apply(n,arguments):n.queue.push(arguments)};\n      if(!f._fbq)f._fbq=n;n.push=n;n.loaded=!0;n.version='2.0';\n      n.queue=[];t=b.createElement(e);t.async=!0;\n      t.src=v;s=b.getElementsByTagName(e)[0];\n      s.parentNode.insertBefore(t,s)}(window, document,'script',\n      'https://connect.facebook.net/en_US/fbevents.js');\n      fbq('init', '${this.pixelId}');\n      fbq('track', 'PageView');\n    `;const t=document.createElement("noscript"),n=document.createElement("img");n.height=1,n.width=1,n.style.display="none",n.src=`https://www.facebook.com/tr?id=${this.pixelId}&ev=PageView&noscript=1`,t.appendChild(n),document.head.appendChild(e),document.body.appendChild(t),this.isInitialized=!0,console.log("âœ… Meta Pixel initialized with ID:",this.pixelId),this.processEventQueue()}processEventQueue(){if(this.isInitialized&&0!==this.eventQueue.length)for(;this.eventQueue.length>0;){const e=this.eventQueue.shift();e&&this.trackEventDirect(e)}}trackEventDirect(e){if(!window.fbq||!this.isInitialized)return console.warn("Meta Pixel not initialized, queuing event:",e),void this.eventQueue.push(e);try{window.fbq("track",e.eventName,e.eventData),console.log("ðŸ“Š Meta Pixel Event:",e.eventName,e.eventData),this.sendToBackend(e)}catch(t){console.error("Error tracking Meta Pixel event:",t)}}async sendToBackend(e){try{const t=(null==l?void 0:l.VITE_API_URL)||"http://localhost:3000/api";await fetch(`${t}/tracking/event`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})}catch(t){console.error("Error sending event to backend:",t)}}trackPageView(e,t,n){this.trackEventDirect({eventName:"PageView",eventData:{page_url:e||window.location.href,page_title:t||document.title,referrer:document.referrer,user_agent:navigator.userAgent},userId:n,sessionId:this.getSessionId()})}trackViewContent(e,t,n){this.trackEventDirect({eventName:"ViewContent",eventData:{content_ids:[e],content_type:"raffle",content_name:null==t?void 0:t.title,content_category:"gaming",value:(null==t?void 0:t.price)||0,currency:"MXN"},userId:n,sessionId:this.getSessionId()})}trackAddToCart(e,t,n,i){this.trackEventDirect({eventName:"AddToCart",eventData:{content_ids:[e],content_type:"raffle_ticket",content_name:`Boletos ${t.join(", ")}`,value:n,currency:"MXN",num_items:t.length},userId:i,sessionId:this.getSessionId()})}trackInitiateCheckout(e,t,n,i){this.trackEventDirect({eventName:"InitiateCheckout",eventData:{content_ids:[e],content_type:"raffle_ticket",value:n,currency:"MXN",num_items:t.length},userId:i,sessionId:this.getSessionId()})}trackPurchase(e,t,n,i,a){this.trackEventDirect({eventName:"Purchase",eventData:{content_ids:[t],content_type:"raffle_ticket",value:i,currency:"MXN",num_items:n.length,order_id:e},userId:a,sessionId:this.getSessionId()})}trackLead(e,t){this.trackEventDirect({eventName:"Lead",eventData:{content_name:"User Registration",content_category:"sign_up",value:0,currency:"MXN",...t},userId:e,sessionId:this.getSessionId()})}trackCustomEvent(e,t,n){this.trackEventDirect({eventName:e,eventData:t,userId:n,sessionId:this.getSessionId()})}getSessionId(){let e=sessionStorage.getItem("meta_pixel_session_id");return e||(e=`session_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,sessionStorage.setItem("meta_pixel_session_id",e)),e}isReady(){return this.isInitialized&&!!window.fbq}getPixelId(){return this.pixelId}};if("undefined"!=typeof window){c.trackPageView();let e=window.location.href;new MutationObserver(()=>{window.location.href!==e&&(e=window.location.href,c.trackPageView())}).observe(document.body,{childList:!0,subtree:!0})}export{r as R,c as m};
