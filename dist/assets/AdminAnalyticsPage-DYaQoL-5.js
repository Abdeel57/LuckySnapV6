import{j as e,m as s,n as t,R as a}from"./ui-CC9fDAxl.js";import{r as l}from"./router-DKHyH_C6.js";import{u as i,S as r}from"./index-DmsZdVbW.js";import"./vendor-By4jc1MA.js";const n=({title:t,data:a,type:l,height:i=200,className:r=""})=>{const n=Math.max(...a.map(e=>e.value)),c=()=>e.jsx("div",{className:"flex items-end justify-between h-full space-x-2",children:a.map((t,a)=>e.jsx(s.div,{className:"flex flex-col items-center flex-1",initial:{height:0},animate:{height:"100%"},transition:{delay:.1*a,duration:.5},children:e.jsxs("div",{className:"flex flex-col items-center h-full justify-end",children:[e.jsx("div",{className:`w-full rounded-t ${t.color||"bg-blue-500"}`,style:{height:t.value/n*100+"%",minHeight:"4px"}}),e.jsxs("div",{className:"text-xs text-gray-600 mt-2 text-center",children:[e.jsx("div",{className:"font-medium",children:t.value}),e.jsx("div",{className:"text-xs",children:t.label})]})]})},t.label))});return e.jsxs("div",{className:`bg-white rounded-lg shadow-sm border border-gray-200 p-6 ${r}`,children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:t}),e.jsx("div",{style:{height:`${i}px`},children:(()=>{switch(l){case"bar":default:return c();case"line":return e.jsx("div",{className:"relative h-full",children:e.jsxs("svg",{className:"w-full h-full",viewBox:"0 0 300 200",children:[e.jsx("defs",{children:e.jsxs("linearGradient",{id:"lineGradient",x1:"0%",y1:"0%",x2:"0%",y2:"100%",children:[e.jsx("stop",{offset:"0%",stopColor:"#3b82f6",stopOpacity:"0.8"}),e.jsx("stop",{offset:"100%",stopColor:"#3b82f6",stopOpacity:"0.1"})]})}),[0,25,50,75,100].map(s=>e.jsx("line",{x1:"0",y1:2*s,x2:"300",y2:2*s,stroke:"#e5e7eb",strokeWidth:"1"},s)),e.jsx(s.path,{d:a.map((e,s)=>`${0===s?"M":"L"} ${s/(a.length-1)*280+10} ${200-e.value/n*180}`).join(" "),stroke:"#3b82f6",strokeWidth:"2",fill:"none",initial:{pathLength:0},animate:{pathLength:1},transition:{duration:1,ease:"easeInOut"}}),e.jsx(s.path,{d:`${a.map((e,s)=>`${0===s?"M":"L"} ${s/(a.length-1)*280+10} ${200-e.value/n*180}`).join(" ")} L 290 200 L 10 200 Z`,fill:"url(#lineGradient)",initial:{opacity:0},animate:{opacity:1},transition:{duration:1,delay:.5}}),a.map((t,l)=>{const i=l/(a.length-1)*280+10,r=200-t.value/n*180;return e.jsx(s.circle,{cx:i,cy:r,r:"4",fill:"#3b82f6",initial:{scale:0},animate:{scale:1},transition:{delay:.1*l+.5}},l)})]})});case"pie":case"donut":return(()=>{const t=a.reduce((e,s)=>e+s.value,0);let l=0;return e.jsxs("div",{className:"relative h-full flex items-center justify-center",children:[e.jsx("svg",{className:"w-full h-full",viewBox:"0 0 200 200",children:a.map((a,i)=>{a.value;const r=a.value/t*360,n=l+r,c=l*Math.PI/180,d=n*Math.PI/180,o=["M 100 100",`L ${100+80*Math.cos(c)} ${100+80*Math.sin(c)}`,`A 80 80 0 ${r>180?1:0} 1 ${100+80*Math.cos(d)} ${100+80*Math.sin(d)}`,"Z"].join(" ");return l+=r,e.jsx(s.path,{d:o,fill:a.color||`hsl(${60*i}, 70%, 50%)`,initial:{pathLength:0},animate:{pathLength:1},transition:{delay:.1*i,duration:.5}},i)})}),e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-gray-800",children:t}),e.jsx("div",{className:"text-sm text-gray-600",children:"Total"})]})})]})})()}})()}),("pie"===l||"donut"===l)&&e.jsx("div",{className:"mt-4 flex flex-wrap gap-4 justify-center",children:a.map((s,t)=>e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:s.color||`hsl(${60*t}, 70%, 50%)`}}),e.jsx("span",{className:"text-sm text-gray-600",children:s.label})]},t))})]})},c=()=>{const{data:s,isLoading:c,refreshData:d}=i(),[o,x]=l.useState("30d");if(c)return e.jsx("div",{className:"flex justify-center items-center h-64",children:e.jsxs("div",{className:"text-center",children:[e.jsx(r,{}),e.jsx("p",{className:"text-gray-600 mt-4",children:"Cargando analytics..."})]})});if(!s)return e.jsx("div",{className:"text-center py-20",children:e.jsx("p",{className:"text-gray-600",children:"No se pudieron cargar los datos de analytics"})});const h=()=>{const e="7d"===o?7:"30d"===o?30:90;return s.dailyStats.slice(-e)},m=h().map(e=>({label:new Date(e.date).toLocaleDateString("es-ES",{month:"short",day:"numeric"}),value:e.visitors})),u=h().map(e=>({label:new Date(e.date).toLocaleDateString("es-ES",{month:"short",day:"numeric"}),value:e.sales}));return e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"bg-white rounded-2xl shadow-lg border border-gray-200 p-6 mb-6",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"p-3 bg-blue-100 rounded-xl",children:e.jsx(t,{className:"w-6 h-6 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Analytics"}),e.jsx("p",{className:"text-gray-600",children:"Métricas de rendimiento"})]})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs("select",{value:o,onChange:e=>x(e.target.value),className:"px-3 py-2 border border-gray-300 rounded-xl text-sm focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"7d",children:"Últimos 7 días"}),e.jsx("option",{value:"30d",children:"Últimos 30 días"}),e.jsx("option",{value:"90d",children:"Últimos 90 días"})]}),e.jsxs("button",{onClick:d,className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-xl hover:bg-blue-700 transition-colors text-sm",children:[e.jsx(a,{className:"h-4 w-4"}),"Actualizar"]})]})]})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsx(n,{title:"Visitantes por Día",data:m,type:"line",height:300}),e.jsx(n,{title:"Ventas por Día",data:u,type:"bar",height:300})]})]})};export{c as default};
